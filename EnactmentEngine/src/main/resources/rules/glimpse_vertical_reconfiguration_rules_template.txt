		
		rule "MigrateDown"
		no-loop true
		salience 210
		dialect "mvel"

		when
			$lcpu : LowCpuUser(policy == "vertical");
			$depFc : DeployStatus(service == $lcpu.service);
			
			not ReconfProcess(service == $depFc.service);
		then
			insert (new ReconfProcess($depFc.service));
			ResponseDispatcher.LogViolation(
				"rule: " + drools.getRule().getName(),
				" chor: " + (String) $depFc.chor,
				" service: " + (String) $depFc.service
			);
			ResponseDispatcher.NotifyMeValue(drools.getRule().getName(),
				"@{consumer_id}", 
				(String) $depFc.chor, 
				(String) $depFc.service
			);
			retract($lcpu);
		end


		rule "MigrateUp"
		no-loop true
		salience 310
		dialect "mvel"

		when
			$ev : HighResponseTime(policy == "vertical");
			$depFc : DeployStatus(service == $ev.service);
			
			not ReconfProcess(service == $depFc.service);
		then
			insert (new ReconfProcess($ev.service));
			ResponseDispatcher.LogViolation(
				"rule: " + drools.getRule().getName(),
				" chor: " + (String) $depFc.chor,
				" service: " + (String) $ev.service
			);
			ResponseDispatcher.NotifyMeValue(drools.getRule().getName(),
				"@{consumer_id}",
				(String) $depFc.chor, 
				(String) $ev.service
			);
			retract($ev);
		end